## TOS Node Client

### Install

```bash
npm install byted-tos-client --registry=http://npm.byted.org
```

### Demo

```js
// 本地测试时，设置 CONSUL_HTTP_HOST 为开发机
// process.env.CONSUL_HTTP_HOST = '10.6.131.79';

const { TosClient, cdn }= require('byted-tos-client');

const client = new TosClient({
  bucket: 'bucket_name_xxx', // must have
  accessKey: 'access_key_xxx', // must have
  timeout: 10, // optional, 10 is default
  cluster: 'default', // optinal, 'default' is default
  service: 'toutiao.tos.tosapi' // optional, 'toutiao.tos.tosapi' is default
});

// upload file
client.uploadFile('to/upload/file/path/xxx')
  .then(() => console.log('upload finished'))
  .catch(err => console.log(err));
// or
const fileBuffer = fs.readFileSync('to/upload/file/path/xxx');
client.uploadFileBuf('/file/name/to/save/in/tos', fileBuffer)
  .then(() => console.log('upload finished'))
  .catch(err => console.log(err));

// download file
client.downloadFileBuf('to/download/file/name')
  .then(buf => fs.writeFileSync('to/save/path/xxx/local', buf))
  .catch(err => console.log(err));

// delete file
client.deleteFile('to/delete/file/name')
  .then(() => console.log('delete finished'))
  .catch(err => console.log(err));

// get file info (size in byte and last-modified in timestamp)
client.getFileInfo('file/name')
 .then(info => console.log(info.size, info.time))
 .catch(err => console.log(err));

// cdn
cdn.getDomains('TT', 'bucket_name', 'test.jpg');
cdn.getDomainsLargefile('TT', 'bucket_name', 'test.jpg');

```

[TOS 系统](tos.byted.org)
